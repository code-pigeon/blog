<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【sublime笔记】</title>
	<link href="../css/index.css" rel="stylesheet">
	<!-- syntax highlighting -->
	<link rel="stylesheet" type="text/css" href="../css/code_highlight.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
	<!-- table of content -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.27.4/tocbot.min.js"></script>
</head>
<body>
	<header>
		<nav>
		    <ul>
		        <li><a href="../index.html">首页</a></li>
		        <li><a href="分类.html">分类</a></li>
		        <li><a href="时间轴.html">时间轴</a></li>
		        <!-- <li><a href="/contact">项目</a></li> -->
		        <li><a href="https://github.com/code-pigeon">github</a></li>
		    </ul>
		</nav>
	</header>
	<div class=fluid> 
		<h1 id="sublime-text笔记">sublime text笔记</h1>
<p>最后编辑：24/11/28/12:11</p>
<h2 id="0.-参考">0. 参考</h2>
<ul>
<li><a href="https://www.sublimetext.com/docs/">sublime官网文档</a></li>
<li>《Mastering Sublime Text》Dan Peleg</li>
<li><a href="https://docs.sublimetext.io/reference/">ST Community Docs，Reference</a></li>
<li><a href="https://www.sublimetext.com/docs/api_reference.html">Sublime Text API reference</a></li>
</ul>
<h2 id="1.-基本用法">1. 基本用法</h2>
<h3 id="1.1-一般快捷键">1.1 一般快捷键</h3>
<p><code>ctrl</code>+<code>P</code>：通过查找跳转到目录下任意文件；<br />
<code>ctrl</code>+<code>shift</code>+<code>P</code>：通过查找使用快捷键；<br />
<code>ctrl</code>+<code>M</code>：跳转到匹配的括号处；<br />
<code>ctrl</code>+<code>G</code>：跳转到行；<br />
<code>alt</code>+<code>数字</code>：跳转到对应位置的标签页；<br />
<code>ctrl</code>+<code>PgUp/PgDn</code>：按顺序切换标签页；</p>
<h3 id="1.2-查找与替换">1.2 查找与替换</h3>
<p><code>ctrl</code>+<code>F/H</code>：查找/替换；</p>
<p>在查找下的快捷键：<br />
<code>alt</code>+<code>R</code>：正则表达式开关；<br />
<code>alt</code>+<code>C</code>：大小写开关；<br />
<code>alt</code>+<code>W</code>：精确匹配开关；<br />
<code>enter</code>：查找下一个；<br />
<code>shift</code>+<code>enter</code>：查找上一个；<br />
<code>alt</code>+<code>enter</code>：查找全部；</p>
<h3 id="1.3-代码的">1.3 代码的</h3>
<p><code>ctrl</code>+<code>R</code>：查找函数；<br />
<code>ctrl</code>+<code>;</code>：查找；</p>
<h3 id="1.4（不知起啥名）">1.4（不知起啥名）</h3>
<p><code>ctrl</code>+<code>X</code>：删除行；<br />
<code>ctrl</code>+<code>enter</code>：行后插入行；<br />
<code>ctrl</code>+<code>shift</code>+<code>enter</code>：行前插入行；<br />
<code>ctrl</code>+<code>L</code>：选中行；<br />
<code>ctrl</code>+<code>shitf</code>+<code>J</code>：合并行；<br />
<code>ctrl</code>+<code>shift</code>+<code>/</code>：块注释；<br />
<code>ctrl</code>+<code>shift</code>+<code>V</code>：粘贴并自动缩进；</p>
<h3 id="1.5-方形选择">1.5 方形选择</h3>
<p><code>鼠标右键</code>+<code>Shift</code><br />
添加到选择：<code>鼠标右键</code>+<code>Shift</code>+<code>Ctrl</code><br />
从选择中删除：<code>鼠标右键</code>+<code>Shift</code>+<code>Alt</code></p>
<h2 id="2.-snippet">2. snippet</h2>
<p>snippet：文件后缀<code>.sublime-snippet</code>的xml文件。</p>
<blockquote>
<p>若想要在<code>&lt;content&gt;</code>标签中写<code>$</code>应该写<code>\$</code>。</p>
</blockquote>
<pre><code class="language-xml">&lt;snippet&gt;
  &lt;content&gt;&lt;![CDATA[&lt;!doctype html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
    &lt;meta name=&quot;description&quot; content=&quot;$1&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial scale=1&quot;&gt;
    &lt;title&gt;${2:Untitled}&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    Hello ${3:$TM_FULLNAME}! Welcome to $2!
    $0
  &lt;/body&gt;
&lt;/html&gt;]]&gt;
  &lt;/content&gt;
  &lt;tabTrigger&gt;doctype&lt;/tabTrigger&gt;
  &lt;description&gt;HTML5 Structure&lt;/description&gt;
  &lt;scope&gt;text.html&lt;/scope&gt;
&lt;/snippet&gt;
</code></pre>
<p>tabTrigger：触发snippet的关键字；<br />
scope：表示此snippet的作用范围（文件类型），scope的完整类型见<a href="https://gist.github.com/danpe/6993237">https://gist.github.com/danpe/6993237</a>；Hello you are sb!</p>
<p>触发此snippet之后，首先光标会到达<code>content=&quot;$1&quot;</code>的<code>$1</code>处；<br />
然后会到<code>${2:Unititled}</code>处，此处的默认值为<code>Untitled</code>；<br />
接着会到<code>${3:$TM_FULLNAME}</code>处，此处的<code>$TM_FULLNAME</code>为环境变量，对于完整的环境变量见<a href="https://gist.github.com/danpe/6996806">https://gist.github.com/danpe/6996806</a>；<br />
最后退出snippet时，光标会到<code>$0</code>处，若没有<code>$0</code>，则默认跳转到snippet的最后。</p>
<h2 id="3.-command">3. command</h2>
<h3 id="3.1-调用command">3.1 调用command</h3>
<h4 id="3.1.1-通过控制台调用">3.1.1 通过控制台调用</h4>
<blockquote>
<p>在<a href="https://docs.sublimetext.io/reference/commands.html">sublime官网文档</a>可以找到所有<code>command</code>命令。</p>
</blockquote>
<p>command命令可以使用控制台进行调用：</p>
<ol>
<li><code>ctrl</code>+<code>`</code>打开控制台</li>
<li>输入<code>&lt;object&gt;.run_command(&lt;command&gt;, { &lt;command_param1&gt;: &lt;command_arg1&gt;, ...})</code></li>
</ol>
<blockquote>
<p>其中</p>
<ol>
<li><code>&lt;object&gt;</code>可以是<code>sublime</code>、<code>window</code>或<code>view</code>，分别代表当前sublime应用对象、当前sublime窗口对象、和当前的标签页对象，分别对应三种不同的<a href="#3.2-command%E7%9A%84%E4%B8%89%E7%A7%8D%E7%B1%BB%E5%9E%8B">command类型</a>：<code>ApplicationCommand</code>、<code>WindowCommand</code>、<code>TextCommand</code></li>
<li><code>&lt;command&gt;</code>表示command的名称，<code>&lt;command_param1&gt;</code>表示command的参数名，<code>&lt;command_arg1&gt;</code>表示command的参数值。</li>
</ol>
</blockquote>
<p>例如，在当前标签页文件的末尾插入一段字符串，可以使用</p>
<pre><code class="language-python">view.run_command('append', {'characters': &quot;插入的文字&quot;, 'scroll_to_end': False})
</code></pre>
<blockquote>
<p>根据sublime官网文档，<code>append</code>命令的格式为：</p>
<blockquote>
<p><code>append</code></p>
<p>Inserts a string at the end of the view.</p>
<ul>
<li><strong>characters</strong> (String): String to be inserted.</li>
<li><strong>force</strong> (Bool):</li>
<li><strong>scroll_to_end</strong> (Bool):</li>
</ul>
</blockquote>
</blockquote>
<h4 id="3.1.2-通过命令面板（Command-Palette）调用">3.1.2 通过命令面板（Command Palette）调用</h4>
<p>另外也可以用命令面板进行调用：</p>
<ol>
<li><code>ctrl</code>+<code>shift</code>+<code>P</code>打开命令面板</li>
<li>查找需要的命令并用鼠标单击/按下<code>enter</code>键</li>
</ol>
<blockquote>
<p><strong>注</strong></p>
<p>有些command会根据当前标签页的情况判断是否展示，比如一个应用于C语言的command会检查文件的后缀名是否为<code>.c</code>。</p>
</blockquote>
<h4 id="3.1.3-通过快捷键调用">3.1.3 通过快捷键调用</h4>
<p>略</p>
<h3 id="3.2-command的三种类型">3.2 command的三种类型</h3>
<blockquote>
<p>参考<a href="https://docs.sublimetext.io/reference/plugins.html">https://docs.sublimetext.io/reference/plugins.html</a></p>
</blockquote>
<table>
<thead>
<tr>
<th align="left">command类型</th>
<th align="left">对应的对象</th>
<th align="left">表示的实体</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>ApplicationCommand</code></td>
<td align="left"><code>sublime</code>对象</td>
<td align="left">sublime进程</td>
</tr>
<tr>
<td align="left"><code>WindowCommand</code></td>
<td align="left"><code>window</code>对象</td>
<td align="left">一个sublime应用窗口</td>
</tr>
<tr>
<td align="left"><code>TextCommand</code></td>
<td align="left"><code>view</code>对象</td>
<td align="left">sublime窗口中的一个标签页</td>
</tr>
</tbody>
</table>
<p><code>WindowCommand</code>实例拥有<code>.window</code>属性，表示当前窗口。<br />
<code>TextCommand</code>实例拥有<code>.view</code>属性，表示当前标签页。</p>
<p>三种类型都拥有：</p>
<ul>
<li><code>.run()</code>方法：执行该command；</li>
<li><code>is_visible</code>方法：是否在Command Palette（即<code>ctrl</code>+<code>shift</code>+<code>P</code>出现的哪个）中显示；</li>
</ul>
<h3 id="零碎的">零碎的</h3>
<h4 id="insert和insert_snippet这两个command的区别">insert和insert_snippet这两个command的区别</h4>
<p><code>insert</code>用于简单地往光标处插入字符串：</p>
<pre><code class="language-python">view.run_command('insert', {'characters': '插入的文字'})
</code></pre>
<p><code>insert_snippet</code>可以插入一段snippet（这意味着可以使用<code>$1</code>等的占位符）：</p>
<pre><code class="language-python">view.run_command('insert_snippet', { 'contents': 'hello ${1: sb}! $0'})
</code></pre>
<p>也可以直接调用一个snippet文件：</p>
<pre><code class="language-python">view.run_command('insert_snippet', { 'name': 'Packages/User/test.sublime-snippet'})
</code></pre>
<h2 id="4.-插件plugin">4. 插件plugin</h2>
<p>插件其实就是用户写一个属于自己的<a href="#3.-command">command</a>。</p>
<p>插件使用python语言编写。</p>
<h3 id="4.1-创建第一个plugin">4.1 创建第一个plugin</h3>
<h4 id="4.1.1-创建plugin">4.1.1 创建plugin</h4>
<ol>
<li>依次点击选项卡<code>Tools/Developer/New Plugin</code>，出现一个新的标签页，里面会默认有一个示例的<code>.py</code>文件。</li>
</ol>
<pre><code class="language-python">import sublime
import sublime_plugin


class ExampleCommand(sublime_plugin.TextCommand):
  def run(self, edit):
    self.view.insert(edit, 0, &quot;Hello, World!&quot;)
</code></pre>
<ol start="2">
<li>按下<code>ctrl</code>+<code>s</code>保存到默认的路径，可以随意命名。</li>
</ol>
<p>这样一个简单的plugin就创建好了。</p>
<h4 id="4.1.2-运行plugin">4.1.2 运行plugin</h4>
<p>运行创建好的plugin：</p>
<ul>
<li><code>ctrl</code>+<code>`</code>打开控制台，输入<code>view.run_command('example')</code>。<br />
可以看到打开标签页的开头被插入了&quot;Hello, World&quot;。</li>
</ul>
<h3 id="4.2-plugin的命名约定">4.2 plugin的命名约定</h3>
<p>plugin必须是名字为<code>XxxCommand</code>的python类</p>
<blockquote>
<p><strong>注</strong></p>
<p>（而且必须继承<code>sublime_plugin.&lt;object&gt;Command</code>，<code>&lt;object&gt;</code>为<code>Text</code>、<code>Window</code>或<code>Application</code>，参见<a href="#3.2-command%E7%9A%84%E4%B8%89%E7%A7%8D%E7%B1%BB%E5%9E%8B">3.2 command的三种类型</a>）。</p>
</blockquote>
<p>sublime会将<code>XxxCommand</code>去掉后面的<code>Command</code>并将剩余的部分转化为蛇形命名形式（例如<code>OpenFileCommand</code> ==&gt; <code>open_file</code>）作为command的名字。</p>
<h3 id="零碎的">零碎的</h3>
<h4 id="实现插入当前日期的两个方法">实现插入当前日期的两个方法</h4>
<h5 id="1、在插件中调用现成的command">1、在插件中调用现成的command</h5>
<pre><code class="language-python">import datetime
import sublime_plugin

class AddCurrentTimeCommand(sublime_plugin.TextCommand):
  def run(self, edit):
    self.view.run_command('insert', 
      {'characters': &quot;%s&quot; % datetime.datetime.now().strftime(&quot;%y/%m/%d/%H:%M&quot;)}
    )
</code></pre>
<p>调用了<code>insert</code>这个command进行插入。</p>
<h5 id="2、使用sublime-API">2、使用sublime API</h5>
<pre><code class="language-python">import datetime
import sublime_plugin

class AddCurrentTimeCommand(sublime_plugin.TextCommand):
  def run(self, edit):
    # 定义要插入的字符串
    time_str = &quot;%s&quot; % datetime.datetime.now().strftime(&quot;%y/%m/%d/%H:%M&quot;)

    # 获取当前选择（光标）的区域
    sel = self.view.sel()

    # 遍历所有的选区（通常只有一个光标位置）
    for region in sel:
      # 在光标位置插入文本
      self.view.insert(edit, region.begin(), time_str)    

</code></pre>
<p><code>view</code>表示当前的标签页，<code>view.sel()</code>会返回一组<code>region</code>（<code>Region</code>类型表示光标选中的文本区域），<code>region.begin()</code>会返回选中区域的开始位置（类型为<code>Point</code>，表示以文件开头为起始的偏移量），接着用<code>view.insert()</code>方法，指定位置并插入文本。</p>


		<!-- CC -->
		<br />
		<hr />
		<blockquote>
		<p><strong>作者</strong>：码鸽<br />
		<strong>链接</strong>：<a href="https://code-pigeon.github.io/blog/html/【sublime笔记】.html">https://code-pigeon.github.io/blog/html/【sublime笔记】.html</a><br />
		<strong>版权声明</strong>：博客所有原创内容（包括但不限于文章、图像等）除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a>国际许可协议。任何人均可自由传播，但禁止用于商业用途且必须署名并以相同方式分享。</p>
		</blockquote>
		<!-- \CC -->

		<!-- visitor -->
		<!-- id 将作为查询条件 -->
		<span id="html/【sublime笔记】.html" class="leancloud_visitors" data-flag-title="【sublime笔记】">
		    <em class="post-meta-item-text">阅读量 </em>
		    <i class="leancloud-visitors-count">0</i>
		</span>
		<!-- \visitor -->


		<!-- comment -->
		<h2 id="评论">评论</h2>
		<!-- <div class="giscus"></div> -->
		<div id="vcomments"></div>
		<!-- \comment -->
	</div>

	<div class="left-sidebar">
		<div class="toc"></div>
		<div class="toc-toggle"></div>
	</div>

	<!-- /////////////////////////////////////////////////////////////////////////////////////////////////////////// -->

	<!-- /////////////// script region //////////////// -->

	<script src="../js/code_highlight.js" type="text/javascript"></script>
		
	<!-- table of cotent -->
	<script src="../js/toc.js" type="text/javascript" ></script>

	<!-- giscus -->
	<!-- <script src="https://giscus.app/client.js"
	        data-repo="code-pigeon/blog"
	        data-repo-id="R_kgDOMDeCsA"
	        data-category="Announcements"
	        data-category-id="DIC_kwDOMDeCsM4Chk54"
	        data-mapping="pathname"
	        data-strict="0"
	        data-reactions-enabled="1"
	        data-emit-metadata="0"
	        data-input-position="top"
	        data-theme="dark_protanopia"
	        data-lang="zh-CN"
	        crossorigin="anonymous"
	        async>
	</script> -->

	<!-- Valine -->
	<script src="../js/Valine.min.js" type="text/javascript"></script>
	<script>
	    new Valine({
	        el: '#vcomments',
	        appId: 'TDB9xGfHmUV3oqQsbt0cMGeC-gzGzoHsz',
	        appKey: 'zGEuPjaoxWdF8dz9iB1rvSj4',
	        placeholder: '期待你的评论',
	        avatar: 'wavatar',
	        visitor: true,
	        enableQQ: true
	    })
	</script>

</body>
</html>